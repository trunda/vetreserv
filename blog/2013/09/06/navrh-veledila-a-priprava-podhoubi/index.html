
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Návrh veledíla a příprava podhoubí - Reálná Ember.js aplikace</title>
  <meta name="author" content="Jakub Truneček">

  
  <meta name="description" content="Minule jsem sliboval, nyní je čas plnit. Dnes si připravím výzvu v podobě seznamu fuknčností, kterou se budu v následujících dnech snažit realizovat &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://trunda.github.io/vetreserv/blog/2013/09/06/navrh-veledila-a-priprava-podhoubi">
  <link href="/vetreserv/favicon.png" rel="icon">
  <link href="/vetreserv/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/vetreserv/atom.xml" rel="alternate" title="Reálná Ember.js aplikace" type="application/atom+xml">
  <script src="/vetreserv/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/vetreserv/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43836555-1']);
	_gaq.push(['_setDomainName','github.io']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><div id="header">
	<h1>Reálná aplikace v Ember.js</h1>
	<p>Vývoj reálné aplikace v Ember.js krok za krokem</p>
</div>
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/vetreserv/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:trunda.github.io/vetreserv" />
    <input class="search" type="text" name="q" results="0" placeholder="Vyhledávat"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/vetreserv/">Blog</a></li>
  <li><a href="/vetreserv/blog/archives">Archív</a></li>
  <li><a href="/vetreserv/ja">Něco málo o mně</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
  
    
      <h1 class="entry-title">Návrh veledíla a příprava podhoubí</h1>
    
  
    
      <p class="meta">
        








  


<time datetime="2013-09-06T16:24:00+02:00" pubdate data-updated="true">06. 09. 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Minule jsem sliboval, nyní je čas plnit. Dnes si připravím výzvu v podobě seznamu fuknčností, kterou se budu v následujících dnech snažit realizovat. Doufejme úspěšně. Na konec, abych pořád jen <abbr title="Opravdu divné slovo">nefilosofoval</abbr>, si připravím vývojové prostředí – Ember.js základ servírovaný <abbr title="Ruby on Rails">RoR</abbr> aplikací.</p>

<p>Je pravdou, že sice mám rád vše živé, o to víc, když <a href="https://sphotos-b.xx.fbcdn.net/hphotos-ash3/37264_1397809076486_7835927_n.jpg">je to roztomilé</a>. Nicméně moje láska ke zvířatům se omezuje pouze na mazlení, co se týká zdravovědy, nevím o tom zhola nic. Přesto si říkám, že rezervační systém pro veterinární kliniku se přeci nebude moc lišit od ostatních, podobně založených, aplikací.</p>

<!-- more -->

<h3 id="co-to-bude-umt">Co to bude umět?</h3>

<p>Aby se seznam funkčností dal vůbec nějak uchopit, rozdělil jsem uživatelské role v aplikaci na</p>

<ol>
  <li>klienta,</li>
  <li>a správce.</li>
</ol>

<h4 id="klient">Klient</h4>

<p>Na všech rezervačních systémech, co jsem prošel, mě neuvěřitelně obtěžovala jejich nepřehlednost. Vždy se mi zobrazila obrazovka plná textu, políček, barviček a já jsem musel zkoumat, kam vlastně mám klinkout … boha jeho, já si chci zahrát badminton, ne přemýšlet nad tím, co zrovna tahle divně šedivá barva znamená.</p>

<p>Moje aplikace bude lepší! Nechci aby byl klient kliniky zmaten jak lesní včela, chci, aby si pohodlně zarezervoval očkování svého mazlíčka a navíc z toho měl skvělý pocit. Celý proces bude jednoduchý, několika-málo-krokový, průvodce s pár otázkami a s přehledným výběrem konkrétního času na konci. Jednotlivé kroky budou:</p>

<ol>
  <li>
    <p><strong>Výběr zákroku</strong> (vakcinace, prohlídka, kardio vyšetření, …). Ten určí, kolik přibližně času je pro něj potřeba rezervovat. </p>

    <p><strong>Výběr přibližného termínu</strong> (v tomto týdnu, příští týden, kdykoliv). Údaj pomůže systému vybrat nejlepší časy a rozmezí zobrazeného kalendáře v jednom z dalších kroků.</p>
  </li>
  <li>
    <p><strong>Informace o klientovi a jeho mazlíčkovi</strong>. Požadovány budou jen ty nezbytné – jméno klienta, emailová adresa, druh a jméno zvířátka a nakonec jeho telefonní číslo.</p>
  </li>
  <li>
    <p><strong>Výběr konkrétního času</strong>. Přehledná forma kalendáře s vyznačenými časovými úseky, které se pro klientův požadovaný zákrok hodí. Po kliknutí na něj se přesně určí čas a den, který je možno zarezervovat.</p>
  </li>
  <li>
    <p><strong>Rekapitulace a potvrzení</strong>. Nu a nakonec to klient vše povrdí a tím odešle do systému.</p>
  </li>
</ol>

<p>Co se ale z pohledu klienta bude dít potom? </p>

<ol>
  <li>Přijde mu potvrzovací email a SMS s informací, že rezervace byla přijata a čeká na schválení lékařem. </li>
  <li>Po shválení rezervace bude odeslán email a SMS s potvrzeným termínem. </li>
  <li>Navíc den před termínem návštěvy bude poslán ještě jeden email a SMS, aby klient nezapomněl, že má dorazit na veterinu.</li>
</ol>

<p>V tuto chvíli ještě opomíjím možnost registrace a přihlášení klienta, chci aby to z počátku bylo co nejjednodušší, nicméně s tím bude počítáno a v budoucnu se funkčnost rozšíří.</p>

<h4 id="sprvce">Správce</h4>

<p>Správcem aplikace bude veterinář, proto ani na něj nechci valit přehršle políček, tlačítek, hejbátek a možností. Práce v aplikaci pro něj musí být rychlá a pohodlná, proto se budu ve funkcích omezovat pouze na to nejnutnější. </p>

<ol>
  <li><strong>Manuální rezervace</strong>. Minimálně z počátku budou klienti, jak jsou nyní zvyklí, převážně volat, proto zpřístupním správci možnost manuální rezervace. V podstatě se bude jednat o průvodce, který je popsán výše. </li>
  <li><strong>Správa rezervací</strong>. Umožněny budou všechny základní operace s rezervacemi – její schválení, zrušení, úprava či její detailní výpis.</li>
  <li><strong>Nastavení termínů, lékařů (ordinací) a úkonů</strong>. U popisu funkcí klientské role jsem uváděl, že si jako jednu z prvních věcí bude vybírat druh zákroku – ty tedy musí mít správce možnost nastavit. Stejně tak mu bude umožňěno nastavit rezervovatelné dny a hodiny – to sice s možností automatického opakování, společně s možností upravit jednotlivé dny dle potřeby (dovolené, neplánované operace, nepřítomnosti lékařky, atp.).</li>
</ol>

<p>Tohle myslím popisuje vše, co bude (minimálně z počátku) potřeba. Vypadá to, že toho moc není, ale to je přeci dobře, ne? Nechci lesní včely, ale spokojené uživatele – čím méně se toho budou muset učit a zkoumat, tím lépe. Pac a <abbr title="Keep It Simple, Stupid!">KISS</abbr>, tvoje Máňa!</p>

<h3 id="sliboval-tu-nkdo-wireframy">Sliboval tu někdo wireframy?</h3>

<p>Když jsem si přečetl, co jsem všechno <a href="http://trunda.github.io/vetreserv/blog/2013/09/03/proc-tenhle-blog/">minule nasliboval</a>, trochu mě polilo. Nu což, tvrdej chlap sliby plní a já ostatně taky. Uvařil jsem kafe a jal se kreslit.</p>

<p><img src="/vetreserv/images/navrh-veledila/wireframing.jpg" title="Vše je připraveno: tužka, papír, kafe a guma to fotí" /></p>

<p>Výsledek mého snažení <a href="https://www.dropbox.com/sh/5xtkkxwom506w1j/oi-C-LT6D2">jsem poslal na dropbox</a>, jedná se o tři obrázky (<a href="https://www.dropbox.com/sh/5xtkkxwom506w1j/oi-C-LT6D2#lh:null-001.jpg">první</a>, <a href="https://www.dropbox.com/sh/5xtkkxwom506w1j/oi-C-LT6D2#lh:null-002.jpg">druhý</a> a <a href="https://www.dropbox.com/sh/5xtkkxwom506w1j/oi-C-LT6D2#lh:null-003.jpg">třetí</a>). Bohužel aktuálně nedisponuji skenerem, tak jsem to ladně vyfotil, snad se to dá přečíst.</p>

<h3 id="a-sedm-den-odpoval-jdeme-do-finie">A sedmý den odpočíval, jdeme do finiše</h3>

<p>Teď už tedy mám <abbr title="Tohle slovo s velkým gustem používá můj drahý kolega a to zejména v situacích, kdy se naprosto nehodí. Ptám se ho: &quot;Už je to hotové?&quot; a on kontruje: &quot;Rámcově ano.&quot; No nezabili byste ho?">rámcovou</abbr> představu o tom, co moje veledílo bude umět, dokonce i vím jak to <abbr title="Už chápu, proč to slovo má tak rád.">rámcově</abbr> budě vypadat. Už jen mít, po vzoru našich předků a možná i následovníků, kde <abbr title="... a posílit tak mír.">budovat</abbr>. Co vše bude potřeba?</p>

<ol>
  <li>Ruby,</li>
  <li>Ruby on Rails,</li>
  <li>založit nový Rails projekt,</li>
  <li>Ember.js,</li>
  <li>a na závěr otestovat, jestli vše pohromadě funguje.</li>
</ol>

<p><em>Všechny instalace budu provádět na Mac OS, tudíž instalace na libovolné Unixovém systému se nebude příliš lišit. MS Windows nechám tak trochu v pozadí, ale věřím, že i na “widlích” vše půjde celkem snadno.</em></p>

<h4 id="instalace-ruby">Instalace Ruby</h4>

<p>Nainstalovat Ruby není tak složité, Mac OS dokonce má nějakou starší verzi v sobě přibalenou už po instalaci, udržet však krok s novými verzemi, nebo dokonce mezi nimi přepínat, je bez pomoci téměř nemožné. Všechny problémy vyřeší <a href="https://rvm.io/"><abbr title="Ruby Version Manager">RVM</abbr></a>. Pro instalaci <abbr title="Ruby Version Manager">RVM</abbr> a jednotlivý verzí Ruby (na Mac OS) jsou potřeba Developer Tools – <em>což asi většina stejně má, ty co ne, uvařit kávu a hurá na dlouho trvající instalaci přes App Store</em>. Instalace <abbr title="Ruby Version Manager">RVM</abbr> (dle instrukcí na webu):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>curl -L https://get.rvm.io | bash
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Po úspěšné instalaci, jsem byl upozorněn na nezbytnou úpravu souboru <code>~/.bash_profile</code> vložením následujícího:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>~/.bash_profile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">export </span><span class="nv">RBENV_ROOT</span><span class="o">=</span>/usr/local/var/rbenv
</span><span class="line">
</span><span class="line"><span class="o">[[</span> -s <span class="s2">&quot;$HOME/.rvm/scripts/rvm&quot;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> <span class="s2">&quot;$HOME/.rvm/scripts/rvm&quot;</span> <span class="c"># Load <abbr title="Ruby Version Manager">RVM</abbr> into a shell session *as a function*</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Učinil jsem tak a otestoval si, že <abbr title="Ruby Version Manager">RVM</abbr> funguje.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>rvm -v
</span><span class="line">
</span><span class="line">rvm 1.22.3 <span class="o">()</span> by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; <span class="o">[</span>https://rvm.io/<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Skvěle, teď instalace aktulní verze Ruby společně s další kávou, kompilace chvilku zabere:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>rvm list known
</span><span class="line"><span class="c"># MRI Rubies</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>1.8.6<span class="o">[</span>-p420<span class="o">]</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>1.8.7<span class="o">[</span>-p374<span class="o">]</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>1.9.1<span class="o">[</span>-p431<span class="o">]</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>1.9.2<span class="o">[</span>-p320<span class="o">]</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>1.9.3<span class="o">[</span>-p448<span class="o">]</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>2.0.0-p195
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>2.0.0<span class="o">[</span>-p247<span class="o">]</span>
</span><span class="line"><span class="o">[</span>ruby-<span class="o">]</span>2.0.0-head
</span><span class="line">ruby-head
</span><span class="line">
</span><span class="line">...
</span><span class="line">
</span><span class="line"><span class="nv">$ </span>rvm install 2.0.0
</span><span class="line">...
</span><span class="line">
</span><span class="line"><span class="nv">$ </span>rvm use 2.0.0 default
</span><span class="line">Using ~/.rvm/gems/ruby-2.0.0-p247
</span><span class="line">
</span><span class="line"><span class="nv">$ </span>ruby -v
</span><span class="line">ruby 2.0.0p247 <span class="o">(</span>2013-06-27 revision 41674<span class="o">)</span> <span class="o">[</span>x86_64-darwin12.3.0<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To šlo celkem hladce.</p>

<h4 id="instalace-ruby-on-rails">Instalace Ruby on Rails</h4>

<p>Piece of cake:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>gem install rails
</span><span class="line">...
</span><span class="line">Successfully installed rails-4.0.0
</span><span class="line">
</span><span class="line"><span class="nv">$ </span>rails -v
</span><span class="line">Rails 4.0.0
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Další úspěch, nic člověka nenaplňuje více, než úspěchy, sic drobné, ale přesto úspěchy.</p>

<h4 id="nov-projekt">Nový projekt</h4>

<p>Pro znalé drážní programátory není vytvoření nové aplikace žádný problém.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>rails new vetreserv
</span><span class="line">	create
</span><span class="line"> 	create  README.rdoc
</span><span class="line"> 	create  Rakefile
</span><span class="line">	create  config.ru
</span><span class="line">	create  .gitignore
</span><span class="line">	create  Gemfile
</span><span class="line">	create  app	
</span><span class="line">	...
</span><span class="line">	   run  bundle install
</span><span class="line">Fetching gem metadata from https://rubygems.org/....
</span><span class="line">...
</span><span class="line">Your bundle is <span class="nb">complete</span>!
</span><span class="line">Use <span class="sb">`</span>bundle show <span class="o">[</span>gemname<span class="o">]</span><span class="sb">`</span> to see where a bundled gem is installed.		
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="emberjs">Ember.js</h4>

<p>Pro zkloubení Railsí aplikace a Ember.js jsem si vybral balíček <a href="https://github.com/emberjs/ember-rails">ember-rails</a>, jeho popis obsahuje hezký návod, jak ho nainstalovat.</p>

<ul>
  <li>Do <code>Gemfile</code> mojí aplikace přidám:</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">gem</span> <span class="s1">&#39;ember-rails&#39;</span>
</span><span class="line"><span class="n">gem</span> <span class="s1">&#39;ember-source&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0.0&#39;</span>
</span><span class="line"><span class="n">gem</span> <span class="s1">&#39;handlebars-source&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.0.12&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>Nainstaluji nové balíky:</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~/vetserv<span class="nv">$ </span>bundle install
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>Aby byla při vývoji použitá vývojová verze Emberu přidám do <code>config/environments/development.rb</code> následující řádek:</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>config/environments/development.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">config</span><span class="o">.</span><span class="n">ember</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="ss">:development</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>Vygeneruji si strutkuru Ember.js aplikace:</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~/vetserv<span class="nv">$ </span>rails g ember:bootstrap -g --javascript-engine coffee
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>Nakonec jsem se rozhodl zaktualiziovat Ember.js na nejnovější verzi:</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~/vetserv<span class="nv">$ </span>rails g ember:install --head
</span><span class="line">downloading:  http://builds.emberjs.com/ember-latest.js -&gt; vendor/assets/ember/development/ember.js
</span><span class="line">downloading:  http://builds.emberjs.com/ember-latest.min.js -&gt; vendor/assets/ember/production/ember.js
</span><span class="line">downloading:  http://builds.emberjs.com/ember-data-latest.js -&gt; vendor/assets/ember/development/ember-data.js
</span><span class="line">downloading:  http://builds.emberjs.com/ember-data-latest.min.js -&gt; vendor/assets/ember/production/ember-data.js
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="prvn-pidi-emberjs-aplikace">První pidi Ember.js aplikace</h4>

<p>Abych si ověřil, že vše funguje, připravím si malou aplikaci. Takový ten obligátní Hello World. Začnu s vygenerováním hlavního kontroléru s jedinou akcí</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~/vetserv<span class="nv">$ </span>rails g controller static index
</span><span class="line">  	 create  app/controllers/static_controller.rb
</span><span class="line">	  route  get <span class="s2">&quot;static/index&quot;</span>
</span><span class="line">	 invoke  erb
</span><span class="line">	 create    app/views/static
</span><span class="line">	 create    app/views/static/index.html.erb
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>a nasměruji na něj <code>root</code> routu pomocí řádku <code>root :to =&gt; 'static#index'</code>, výsledný soubor vypadá nějak takto:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>vetreserv/config/routes.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="ss">Vetreserv</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
</span><span class="line">  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;static#index&#39;</span>
</span><span class="line">  <span class="n">get</span> <span class="s2">&quot;static/index&quot;</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Teď přichází na řadu kontrola, zda to funguje – první spuštění “aplikace”:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~/vetserv<span class="nv">$ </span>rails <span class="nv">s</span>
</span><span class="line"><span class="o">=</span>&gt; Booting <span class="nv">WEBrick</span>
</span><span class="line"><span class="o">=</span>&gt; Rails 4.0.0 application starting in development on http://0.0.0.0:3000
</span><span class="line"><span class="o">=</span>&gt; Run <span class="sb">`</span>rails server -h<span class="sb">`</span> <span class="k">for </span>more startup <span class="nv">options</span>
</span><span class="line"><span class="o">=</span>&gt; Ctrl-C to shutdown server
</span><span class="line"><span class="o">[</span>2013-09-05 16:30:00<span class="o">]</span> INFO  WEBrick 1.3.1
</span><span class="line"><span class="o">[</span>2013-09-05 16:30:00<span class="o">]</span> INFO  ruby 2.0.0 <span class="o">(</span>2013-06-27<span class="o">)</span> <span class="o">[</span>x86_64-darwin12.3.0<span class="o">]</span>
</span><span class="line"><span class="o">[</span>2013-09-05 16:30:00<span class="o">]</span> INFO  WEBrick::HTTPServer#start: <span class="nv">pid</span><span class="o">=</span>75033 <span class="nv">port</span><span class="o">=</span>300
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Server naběhl, otevírám prohlížeč a zadávám adresu <code>http://localhost:3000</code>, po otevření JavaScript konzole vidím následující výpis:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">DEBUG: -------------------------------
</span><span class="line">DEBUG: Ember.VERSION : 1.0.0
</span><span class="line">DEBUG: Handlebars.VERSION : 1.0.0
</span><span class="line">DEBUG: jQuery.VERSION : 1.10.2
</span><span class="line">DEBUG: -------------------------------
</span><span class="line">DEBUG: For more advanced debugging, install the Ember Inspector from https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="/vetreserv/images/navrh-veledila/01-button.jpg" title="Okno prohlížeče" /></p>

<p>Všechno jede, paráda.</p>

<p>Po drobném pídění se v dokumentaci jsem schopen sepsat svou první Ember.js aplikaci, jediné, <a href="http://emberjs.com/guides/application/">co je prý</a> potřeba, je napsat jednoduchou šablonu:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>vetreserv/app/assets/javascripts/templates/application.hbs</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">
</span><span class="line"><span class="nt">&lt;header&gt;</span>
</span><span class="line">    <span class="nt">&lt;h1&gt;</span>Hello World<span class="nt">&lt;/h1&gt;</span>
</span><span class="line"><span class="nt">&lt;/header&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;div&gt;</span>
</span><span class="line">    {{ input type=&quot;text&quot; value=name placeholder=&quot;Vaše jméno pane?&quot; }}
</span><span class="line">    <span class="nt">&lt;div&gt;</span>
</span><span class="line">        <span class="nt">&lt;p&gt;</span>Moje jméno je <span class="nt">&lt;strong&gt;</span>{{ name }}<span class="nt">&lt;/strong&gt;</span> a chci napsat reálnou Ember.js aplikaci!<span class="nt">&lt;/p&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Po obnovení stránky se dostavuje pocit, který nejspíše měl MacGyver při sestavení své první nukleární zbraně z dvou kancelářských sponek, vše funguje!</p>

<p><img src="/vetreserv/images/navrh-veledila/emberjs-helloworld.jpg" title="Okno prohlížeče" /></p>

<h3 id="a-to-je-ve-ptel">A to je vše, přátelé!</h3>

<p>Na konec se sluší říct, že celá aplikace bude samozřejmě open source, po každém příspěvku budou na <a href="http://github.com">Githubu</a> k nalezení <a href="https://github.com/trunda/vetreserv">aktuální zdrojové kódy</a>, navíce ke každému článku udělám tag, aby se drahý čtenář mohl podívat, jak se nám ten vývoj posunul. Odkaz vždy přidám.</p>

<p>Pro dnešek je toho až dost, příště poodhalím vizuální podobu několika obrazovek aplikace. Navíc, má-li tento blog být o Ember.js, se pustím do jejich implementace – zatím nejspíš pouze vizuálně, uvidíme.</p>

<h3 id="odkazy">Odkazy</h3>

<ul>
  <li><a href="https://github.com/trunda/vetreserv/tree/01-navrh-veledila">zdrojové kódy</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Autor: <span class="fn">Jakub Truneček</span></span>

      








  


<time datetime="2013-09-06T16:24:00+02:00" pubdate data-updated="true">06. 09. 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://trunda.github.io/vetreserv/blog/2013/09/06/navrh-veledila-a-priprava-podhoubi/" data-via="jtrunecek" data-counturl="http://trunda.github.io/vetreserv/blog/2013/09/06/navrh-veledila-a-priprava-podhoubi/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/vetreserv/blog/2013/09/03/proc-tenhle-blog/" title="Previous Post: Proč tenhle blog?">&laquo; Proč tenhle blog?</a>
      
      
        <a class="basic-alignment right" href="/vetreserv/blog/2013/09/12/grafika-zraje-napisu-si-komponentu/" title="Next Post: Grafika zraje, napíšu si komponentu">Grafika zraje, napíšu si komponentu &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Komentáře</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/vetreserv/blog/2013/09/12/grafika-zraje-napisu-si-komponentu/">Grafika zraje, napíšu si komponentu</a>
      </li>
    
      <li class="post">
        <a href="/vetreserv/blog/2013/09/06/navrh-veledila-a-priprava-podhoubi/">Návrh veledíla a příprava podhoubí</a>
      </li>
    
      <li class="post">
        <a href="/vetreserv/blog/2013/09/03/proc-tenhle-blog/">Proč tenhle blog?</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jakub Truneček <br/>
  <span class="credit">Používám <a href="http://octopress.org">Octopress</a>, společně s <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span> <br />
  <span class="credit"><a href="https://github.com/trunda/vetreserv">Zdrojové kódy</a> pro rezervační systém (vždy aktuální k poslednímu článku)</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'vetreserv';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://trunda.github.io/vetreserv/blog/2013/09/06/navrh-veledila-a-priprava-podhoubi/';
        var disqus_url = 'http://trunda.github.io/vetreserv/blog/2013/09/06/navrh-veledila-a-priprava-podhoubi/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
